# ğŸŒ± ë² ë€ë‹¤ ë†ë¶€ (Balcony Farmer)

<div align="center">

<img width="432" height="126" alt="Frame 6" src="https://github.com/user-attachments/assets/8334f8f1-eea8-4115-9479-7134020c39b3" />


**ìŠ¤ë§ˆíŠ¸íŒœ IoT ì‹œìŠ¤í…œìœ¼ë¡œ ëˆ„êµ¬ë‚˜ ì‰½ê²Œ ë² ë€ë‹¤ì—ì„œ ì‘ë¬¼ì„ ì¬ë°°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤**

[![GitHub](https://img.shields.io/badge/GitHub-Repository-181717?logo=github)](https://github.com/dadadadamin/minifarm)
[![Swagger](https://img.shields.io/badge/Swagger-API_Docs-85EA2D?logo=swagger&logoColor=black)](https://petstore.swagger.io)

</div>

---

## ğŸ“‘ ëª©ì°¨
- [í”„ë¡œì íŠ¸ ì†Œê°œ](#-í”„ë¡œì íŠ¸-ì†Œê°œ)
- [ì£¼ìš” ê¸°ëŠ¥](#-ì£¼ìš”-ê¸°ëŠ¥)
- [ê¸°ìˆ  ìŠ¤íƒ](#-ê¸°ìˆ -ìŠ¤íƒ)
- [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#-ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
- [íŒ€ì› ì†Œê°œ](#-íŒ€ì›-ì†Œê°œ)
- [ê°œë°œ í™˜ê²½](#%EF%B8%8F-ê°œë°œ-í™˜ê²½-ë°-ide)
- [ì‹œì‘í•˜ê¸°](#-ì‹œì‘í•˜ê¸°)
- [ì£¼ìš” êµ¬í˜„ ì‚¬í•­](#-ì£¼ìš”-êµ¬í˜„-ì‚¬í•­)
- [íŠ¸ëŸ¬ë¸”ìŠˆíŒ…](#-íŠ¸ëŸ¬ë¸”ìŠˆíŒ…)

---

## ğŸ’¡ í”„ë¡œì íŠ¸ ì†Œê°œ

**ë² ë€ë‹¤ ë†ë¶€**ëŠ” ë„ì‹¬ ì† ë² ë€ë‹¤ì—ì„œ ìŠ¤ë§ˆíŠ¸í•˜ê²Œ ì‘ë¬¼ì„ ì¬ë°°í•  ìˆ˜ ìˆë„ë¡ ë•ëŠ” IoT ê¸°ë°˜ ìŠ¤ë§ˆíŠ¸íŒœ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

### ê°œë°œ ë°°ê²½
- 1ì¸ ê°€êµ¬ ì¦ê°€ë¡œ ì¸í•œ í™ˆ ê°€ë“œë‹ ìˆ˜ìš” ì¦ê°€
- ì´ˆë³´ìë„ ì‰½ê²Œ ì‘ë¬¼ì„ ì¬ë°°í•  ìˆ˜ ìˆëŠ” ì‹œìŠ¤í…œ í•„ìš”
- IoT ì„¼ì„œì™€ ìë™í™”ë¡œ ìµœì ì˜ ì¬ë°° í™˜ê²½ ì œê³µ

### ì§„í–‰ ê¸°ê°„
**2024.10.01 ~ 2024.11.20** (8ì£¼)

---

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

### 1. ì‹¤ì‹œê°„ í™˜ê²½ ëª¨ë‹ˆí„°ë§ ğŸ“Š
- ì˜¨ë„, ìŠµë„, CO2, EC, ì¡°ë„, í† ì–‘ ìˆ˜ë¶„ ì‹¤ì‹œê°„ ì¸¡ì •
- ì„¼ì„œ ë°ì´í„° ì‹œê°í™” ëŒ€ì‹œë³´ë“œ
- í™˜ê²½ ë°ì´í„° ì´ë ¥ ì¡°íšŒ ë° í†µê³„

### 2. ì›ê²© ì¥ì¹˜ ì œì–´ ğŸ®
- ê´€ìˆ˜ íŒí”„ ìë™/ìˆ˜ë™ ì œì–´
- LED ì¡°ëª… On/Off ë° ë°ê¸° ì¡°ì ˆ
- í™˜í’ê¸° ì œì–´ë¡œ í™˜ê¸° ê´€ë¦¬
- WebSocket ê¸°ë°˜ ì‹¤ì‹œê°„ ì œì–´

### 3. ì‘ë¬¼ ìƒìœ¡ ê´€ë¦¬ ğŸŒ¿
- ì‘ë¬¼ë³„ ìµœì  í™˜ê²½ ì¡°ê±´ ì œê³µ
- ìƒìœ¡ ë‹¨ê³„ë³„ ê´€ë¦¬ ê°€ì´ë“œ
- ì‘ë¬¼ ì„±ì¥ ê¸°ë¡ ë° ì‚¬ì§„ ì €ì¥
- ìˆ˜í™• ì˜ˆìƒ ì‹œê¸° ì•Œë¦¼

### 4. ìë™í™” ê·œì¹™ ì„¤ì • âš™ï¸
- ì¡°ê±´ ê¸°ë°˜ ìë™ ì œì–´ (ì˜ˆ: í† ì–‘ ìˆ˜ë¶„ 30% ì´í•˜ ì‹œ ìë™ ê´€ìˆ˜)
- ì‹œê°„ ê¸°ë°˜ ìŠ¤ì¼€ì¤„ë§ (ì˜ˆ: ì˜¤ì „ 6ì‹œ ì¡°ëª… ON)
- ë³µí•© ì¡°ê±´ ì„¤ì • ê°€ëŠ¥

### 5. ì•Œë¦¼ ë° í†µê³„ ğŸ“±
- ì´ìƒ í™˜ê²½ ê°ì§€ ì‹œ Push ì•Œë¦¼
- ì¼/ì£¼/ì›” ë‹¨ìœ„ í™˜ê²½ í†µê³„
- ì‘ë¬¼ë³„ ìƒìœ¡ ë¶„ì„ ë¦¬í¬íŠ¸

---

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

### Backend
<img src="https://img.shields.io/badge/Java-007396?style=flat-square&logo=Java&logoColor=white"/> <img src="https://img.shields.io/badge/Spring Boot-6DB33F?style=flat-square&logo=Spring Boot&logoColor=white"/> <img src="https://img.shields.io/badge/Spring Security-6DB33F?style=flat-square&logo=Spring Security&logoColor=white"/> <img src="https://img.shields.io/badge/JWT-000000?style=flat-square&logo=JSON Web Tokens&logoColor=white"/> <img src="https://img.shields.io/badge/PostgreSQL-4169E1?style=flat-square&logo=PostgreSQL&logoColor=white"/> <img src="https://img.shields.io/badge/WebSocket-010101?style=flat-square&logo=Socket.io&logoColor=white"/>

### Frontend
<img src="https://img.shields.io/badge/React-61DAFB?style=flat-square&logo=React&logoColor=black"/> <img src="https://img.shields.io/badge/TypeScript-3178C6?style=flat-square&logo=TypeScript&logoColor=white"/> <img src="https://img.shields.io/badge/Vite-646CFF?style=flat-square&logo=Vite&logoColor=white"/> <img src="https://img.shields.io/badge/TailwindCSS-06B6D4?style=flat-square&logo=Tailwind CSS&logoColor=white"/> <img src="https://img.shields.io/badge/Recharts-FF6384?style=flat-square&logo=Chart.js&logoColor=white"/>

### IoT / Hardware
<img src="https://img.shields.io/badge/Raspberry Pi-A22846?style=flat-square&logo=Raspberry Pi&logoColor=white"/> <img src="https://img.shields.io/badge/Python-3776AB?style=flat-square&logo=Python&logoColor=white"/> <img src="https://img.shields.io/badge/Arduino-00979D?style=flat-square&logo=Arduino&logoColor=white"/> <img src="https://img.shields.io/badge/MQTT-660066?style=flat-square&logo=MQTT&logoColor=white"/>

**ì„¼ì„œ ëª©ë¡**
- DHT22 (ì˜¨ìŠµë„ ì„¼ì„œ)
- MH-Z19B (CO2 ì„¼ì„œ)
- EC ì„¼ì„œ (ì „ê¸°ì „ë„ë„)
- BH1750 (ì¡°ë„ ì„¼ì„œ)
- í† ì–‘ ìˆ˜ë¶„ ì„¼ì„œ

### Server & DevOps
<img src="https://img.shields.io/badge/AWS EC2-FF9900?style=flat-square&logo=Amazon EC2&logoColor=white"/> <img src="https://img.shields.io/badge/Nginx-009639?style=flat-square&logo=Nginx&logoColor=white"/> <img src="https://img.shields.io/badge/Docker-2496ED?style=flat-square&logo=Docker&logoColor=white"/> <img src="https://img.shields.io/badge/GitHub Actions-2088FF?style=flat-square&logo=GitHub Actions&logoColor=white"/>

### Cooperation & Communication
<img src="https://img.shields.io/badge/Git-F05032?style=flat-square&logo=Git&logoColor=white"/> <img src="https://img.shields.io/badge/GitHub-181717?style=flat-square&logo=GitHub&logoColor=white"/> <img src="https://img.shields.io/badge/Notion-000000?style=flat-square&logo=Notion&logoColor=white"/> <img src="https://img.shields.io/badge/Slack-4A154B?style=flat-square&logo=Slack&logoColor=white"/> <img src="https://img.shields.io/badge/Figma-F24E1E?style=flat-square&logo=Figma&logoColor=white"/>

---

## ğŸ— ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚   Backend    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  Database   â”‚
â”‚   (React)   â”‚  HTTPS  â”‚ (Spring Boot)â”‚   JDBC  â”‚ (PostgreSQL)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â–²
                               â”‚ WebSocket
                               â”‚ (MQTT)
                               â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  Raspberry   â”‚
                        â”‚      Pi      â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â–²
                               â”‚ GPIO/I2C
                               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  IoT Sensors        â”‚
                    â”‚  - Temperature/     â”‚
                    â”‚    Humidity         â”‚
                    â”‚  - CO2, EC, Light   â”‚
                    â”‚  - Soil Moisture    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ‘¥ íŒ€ì› ì†Œê°œ

| ì´ë¦„ | ì—­í•  | GitHub | ë‹´ë‹¹ ì—…ë¬´ |
|------|------|--------|-----------|
| **íŒ€ì¥** | Backend / IoT | [@github](https://github.com) | ì„¼ì„œ ì—°ë™, API ê°œë°œ |
| **íŒ€ì›1** | Backend | [@github](https://github.com) | ì¸ì¦/ì¸ê°€, DB ì„¤ê³„ |
| **íŒ€ì›2** | Frontend | [@github](https://github.com) | UI/UX, ëŒ€ì‹œë³´ë“œ ê°œë°œ |
| **íŒ€ì›3** | Frontend / IoT | [@github](https://github.com) | ì‹¤ì‹œê°„ ë°ì´í„° ì‹œê°í™” |
| **íŒ€ì›4** | Infra / DevOps | [@github](https://github.com) | ì„œë²„ êµ¬ì¶•, CI/CD |

---

## âš™ï¸ ê°œë°œ í™˜ê²½ ë° IDE

### Backend
- **Language** : Java 17
- **Framework** : Spring Boot 3.1.5
- **Build Tool** : Gradle 8.3
- **IDE** : IntelliJ IDEA 2023.2

### Frontend
- **Language** : TypeScript 5.2
- **Framework** : React 18.2
- **Build Tool** : Vite 4.5
- **IDE** : VS Code

### IoT
- **Language** : Python 3.9
- **Platform** : Raspberry Pi 4 Model B
- **IDE** : VS Code

### Server
- **OS** : Ubuntu 22.04 LTS
- **Web Server** : Nginx 1.18
- **Database** : PostgreSQL 15

---

## ğŸš€ ì‹œì‘í•˜ê¸°

### ğŸ“‹ ì‚¬ì „ ìš”êµ¬ì‚¬í•­
- Java 17+
- Node.js 18+
- PostgreSQL 15+
- Raspberry Pi (IoT ê¸°ëŠ¥ ì‚¬ìš© ì‹œ)

### 1ï¸âƒ£ Backend ì‹¤í–‰

```bash
# ë ˆí¬ì§€í† ë¦¬ í´ë¡ 
git clone https://github.com/dadadadamin/minifarm.git
cd minifarm

# í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
cp application.yml.example application.yml
# application.yml íŒŒì¼ì„ ì—´ì–´ DB ì •ë³´ ë“± ì„¤ì •

# ë¹Œë“œ ë° ì‹¤í–‰
./gradlew clean build
./gradlew bootRun
```

ì„œë²„ê°€ `http://localhost:8080`ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.

### 2ï¸âƒ£ Frontend ì‹¤í–‰

```bash
# í”„ë¡ íŠ¸ì—”ë“œ ë ˆí¬ì§€í† ë¦¬ í´ë¡ 
git clone https://github.com/VerandaFarmer/FE.git
cd FE

# ì˜ì¡´ì„± ì„¤ì¹˜
npm install

# ê°œë°œ ì„œë²„ ì‹¤í–‰
npm run dev
```

í”„ë¡ íŠ¸ì—”ë“œê°€ `http://localhost:5173`ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.

### 3ï¸âƒ£ IoT ì„¼ì„œ ì—°ê²° (ì„ íƒì‚¬í•­)

```bash
# Raspberry Piì—ì„œ ì‹¤í–‰
git clone https://github.com/VerandaFarmer/IoT.git
cd IoT

# Python ì˜ì¡´ì„± ì„¤ì¹˜
pip install -r requirements.txt

# ì„¼ì„œ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
python main.py
```

---

## ğŸ”§ ì£¼ìš” êµ¬í˜„ ì‚¬í•­

### 1. JWT ê¸°ë°˜ ì¸ì¦ ì‹œìŠ¤í…œ
- Spring Securityì™€ JWTë¥¼ í™œìš©í•œ stateless ì¸ì¦
- Access Token(1ì‹œê°„) + Refresh Token(7ì¼) êµ¬ì¡°
- Token ì¬ë°œê¸‰ API êµ¬í˜„

```java
@PostMapping("/refresh")
public ResponseEntity<TokenResponse> refresh(@RequestBody TokenRequest request) {
    return ResponseEntity.ok(authService.refreshToken(request.getRefreshToken()));
}
```

### 2. WebSocket ì‹¤ì‹œê°„ í†µì‹ 
- STOMP í”„ë¡œí† ì½œì„ ì‚¬ìš©í•œ ì–‘ë°©í–¥ í†µì‹ 
- ì„¼ì„œ ë°ì´í„° ì‹¤ì‹œê°„ Push
- ì¥ì¹˜ ì œì–´ ëª…ë ¹ ì¦‰ì‹œ ë°˜ì˜

```java
@MessageMapping("/device/control")
@SendTo("/topic/device")
public DeviceStatus controlDevice(DeviceCommand command) {
    return deviceService.control(command);
}
```

### 3. ì„¼ì„œ ë°ì´í„° ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸
- Raspberry Piì—ì„œ ì„¼ì„œ ë°ì´í„° ìˆ˜ì§‘ (1ë¶„ ì£¼ê¸°)
- MQTT í”„ë¡œí† ì½œë¡œ ë°±ì—”ë“œ ì„œë²„ ì „ì†¡
- ë°ì´í„° ê²€ì¦ ë° DB ì €ì¥
- ì´ìƒì¹˜ ê°ì§€ ì•Œê³ ë¦¬ì¦˜ ì ìš©

```python
def read_sensors():
    data = {
        'temperature': dht22.temperature,
        'humidity': dht22.humidity,
        'co2': mhz19.read(),
        'ec': ec_sensor.read(),
        'light': bh1750.measure_light(),
        'soil_moisture': soil_sensor.read()
    }
    mqtt_client.publish('sensor/data', json.dumps(data))
```

### 4. ìë™í™” ê·œì¹™ ì—”ì§„
- Rule Builder íŒ¨í„´ìœ¼ë¡œ ìœ ì—°í•œ ê·œì¹™ ìƒì„±
- Cron í‘œí˜„ì‹ ê¸°ë°˜ ìŠ¤ì¼€ì¤„ë§
- ì¡°ê±´ë¶€ ì‹¤í–‰ ë¡œì§

```java
AutomationRule rule = AutomationRule.builder()
    .condition(Condition.lessThan("soilMoisture", 30.0))
    .action(Action.turnOn("WATER_PUMP", 180))
    .build();
```

### 5. ë°ì´í„° ì‹œê°í™”
- Recharts ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ì‹¤ì‹œê°„ ì°¨íŠ¸ êµ¬í˜„
- ì‹œê³„ì—´ ë°ì´í„° ìµœì í™” ë Œë”ë§
- ë°˜ì‘í˜• ëŒ€ì‹œë³´ë“œ ë””ìì¸

---

## ğŸ› íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### 1. ì„¼ì„œ ë°ì´í„° ì†ì‹¤ ë¬¸ì œ
**ë¬¸ì œ**: Raspberry Piì—ì„œ ì „ì†¡í•œ ì„¼ì„œ ë°ì´í„°ê°€ ê°„í—ì ìœ¼ë¡œ ì†ì‹¤ë¨

**ì›ì¸**: ë„¤íŠ¸ì›Œí¬ ë¶ˆì•ˆì • ì‹œ MQTT ì—°ê²° ëŠê¹€

**í•´ê²°**:
- ë¡œì»¬ SQLite DBì— ë°ì´í„° ì„ì‹œ ì €ì¥
- ì¬ì—°ê²° ì‹œ ë¯¸ì „ì†¡ ë°ì´í„° ì¼ê´„ ì „ì†¡
- Keep-alive ì„¤ì •ìœ¼ë¡œ ì—°ê²° ìœ ì§€

```python
# ì—°ê²° ì‹¤íŒ¨ ì‹œ ì¬ì‹œë„ ë¡œì§
def on_disconnect(client, userdata, rc):
    if rc != 0:
        while True:
            try:
                client.reconnect()
                break
            except:
                time.sleep(5)
```

### 2. WebSocket ì—°ê²° íƒ€ì„ì•„ì›ƒ
**ë¬¸ì œ**: ì‚¬ìš©ì ë¹„í™œì„± ì‹œ WebSocket ì—°ê²°ì´ ìë™ìœ¼ë¡œ ëŠê¹€

**í•´ê²°**:
- Heartbeat ë©”ì‹œì§€ë¡œ ì—°ê²° ìœ ì§€ (30ì´ˆ ì£¼ê¸°)
- Nginxì˜ proxy_read_timeout ì„¤ì • ì¡°ì •

```nginx
location /ws {
    proxy_pass http://backend;
    proxy_read_timeout 3600s;
    proxy_send_timeout 3600s;
}
```

### 3. ëŒ€ìš©ëŸ‰ ì„¼ì„œ ë°ì´í„° ì¡°íšŒ ì„±ëŠ¥ ì´ìŠˆ
**ë¬¸ì œ**: í•œ ë‹¬ì¹˜ ì„¼ì„œ ë°ì´í„° ì¡°íšŒ ì‹œ ì‘ë‹µ ì†ë„ ì €í•˜

**í•´ê²°**:
- ì‹œê³„ì—´ ë°ì´í„°ì— ì í•©í•œ ì¸ë±ìŠ¤ ì¶”ê°€
- ë°ì´í„° ì§‘ê³„ í›„ ì „ì†¡ (1ë¶„ ë‹¨ìœ„ â†’ 10ë¶„ í‰ê· )
- Redis ìºì‹± ì ìš©

```sql
-- ë³µí•© ì¸ë±ìŠ¤ ìƒì„±ìœ¼ë¡œ ì¡°íšŒ ì„±ëŠ¥ ê°œì„ 
CREATE INDEX idx_sensor_time ON sensor_data(sensor_type, timestamp DESC);
```

---

## ğŸ“Š ì„œë²„ í¬íŠ¸ êµ¬ì„±

| Port | ìš©ë„ | ì„¤ëª… |
|------|------|------|
| 80 | HTTP | HTTPSë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ |
| 443 | HTTPS | Nginx (Frontend) |
| 8080 | Backend | Spring Boot API |
| 5432 | Database | PostgreSQL |
| 1883 | MQTT | IoT ì„¼ì„œ í†µì‹  |

---

## ğŸ“ API ë¬¸ì„œ

ìƒì„¸í•œ API ëª…ì„¸ëŠ” Swagger UIì—ì„œ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ğŸ‘‰ **[Swagger API ë¬¸ì„œ ë°”ë¡œê°€ê¸°](https://petstore.swagger.io/?url=https://raw.githubusercontent.com/dadadadamin/minifarm/main/swagger.yaml)**

---

## ğŸ“· ìŠ¤í¬ë¦°ìƒ·

### ëŒ€ì‹œë³´ë“œ
![ëŒ€ì‹œë³´ë“œ](https://via.placeholder.com/800x450/4CAF50/FFFFFF?text=Dashboard)

### ì¥ì¹˜ ì œì–´
![ì¥ì¹˜ì œì–´](https://via.placeholder.com/800x450/2196F3/FFFFFF?text=Device+Control)

### ì‘ë¬¼ ê´€ë¦¬
![ì‘ë¬¼ê´€ë¦¬](https://via.placeholder.com/800x450/FF9800/FFFFFF?text=Plant+Management)

---

## ğŸ“œ ë¼ì´ì„ ìŠ¤

This project is licensed under the MIT License.

---

## ğŸ™ ê°ì‚¬ì˜ ë§

ì´ í”„ë¡œì íŠ¸ëŠ” í•œì„±ëŒ€í•™êµ ì»´í“¨í„°ê³µí•™ë¶€ ì¡¸ì—… í”„ë¡œì íŠ¸ë¡œ ì§„í–‰ë˜ì—ˆìŠµë‹ˆë‹¤.

**Contact**: your-email@example.com

---

<div align="center">

**â­ Starë¥¼ ëˆŒëŸ¬ì£¼ì‹œë©´ í”„ë¡œì íŠ¸ ê°œë°œì— í° í˜ì´ ë©ë‹ˆë‹¤!**

Made with â¤ï¸ by Balcony Farmer Team

</div>
